Критерии оценки раскладок
===========================

Версия 2.0 использует систему оценки из 4 критериев с весами:

1. Удобство комбинаций (40%)
--------------------------------

**Что оценивается:**
- Процент удобных двухсимвольных комбинаций
- Качество последовательных нажатий в рамках одного слова

**Классификация комбинаций:**

+-----------------------+----------------------------------------------------------+
| Категория             | Описание                                                 |
+=======================+==========================================================+
| **Удобные**           | Пальцы движутся от мизинца к указательному на одной руке |
+-----------------------+----------------------------------------------------------+
| **Частично удобные**  | Тот же палец или обратное направление движения           |
+-----------------------+----------------------------------------------------------+
| **Неудобные**         | Символы на разных руках                                  |
+-----------------------+----------------------------------------------------------+

**Формула:**
.. math::
   \text{удобные\_процент} = \frac{\text{удобные\_комбинации}}{\text{все\_комбинации}} \times 100

2. Штраф на пальцы (30%)
-------------------------

**Что оценивается:**
- Расстояние от домашнего ряда для каждого символа
- Дополнительные штрафы за модификаторы

**Система штрафов:**

+----------------+-------------------------------------+------------------+
| Фактор         | Описание                            | Коэффициент      |
+================+=====================================+==================+
| **Базовый**    | Расстояние от домашнего ряда        | 1.0 за каждый ряд|
+----------------+-------------------------------------+------------------+
| **Shift**      | Использование Shift                 | +3.0 (мизинцы)   |
|                |                                     | +1.5 (другие)    |
+----------------+-------------------------------------+------------------+
| **Alt**        | Использование Alt                   | +0.5             |
+----------------+-------------------------------------+------------------+

**Особенность:** Для символов, доступных на нескольких слоях, выбирается вариант с наименьшим штрафом.

3. Равномерность нагрузки на пальцы (20%)
------------------------------------------

**Что оценивается:**
- Стандартное отклонение нагрузки между 8 пальцами
- Распределение работы между пальцами

**Формула:**
.. math::
   \text{uniformity\_score} = 100 - \text{стандартное\_отклонение} \times \text{коэффициент}

**Идеал:** Равномерное распределение нагрузки между всеми пальцами.

4. Баланс между руками (10%)
-----------------------------

**Что оценивается:**
- Процентное соотношение нагрузки на левую и правую руку
- Сбалансированность работы обеих рук

**Формула:**
.. math::
   \text{balance\_score} = 100 - |\%\text{левой\_руки} - 50| \times 2

**Идеал:** 50% на левую руку, 50% на правую руку.

Система рейтинга
-----------------

### Расчет мест:

1. **Удобные комбинации %** → больше = лучше (1 место у самого высокого)
2. **Штраф на пальцы** → меньше = лучше (1 место у самого низкого)
3. **Равномерность нагрузки** → больше = лучше (1 место у самого высокого)
4. **Баланс рук** → больше = лучше (1 место у самого высокого)

### Итоговый рейтинг:
- **Сумма мест** по всем категориям
- **Чем меньше сумма**, тем лучше раскладка
- **Формат:** `2+1+3+2=8` означает 2-е место по удобству, 1-е по штрафу, 3-е по равномерности, 2-е по балансу

### Пример вывода:
::

   Раскладка                 Удобные %    Штраф        Равномер.  Баланс     Места/Итог
   ----------------------------------------------------------------------------------------
   Фонетическая (яВерт)      18.9%        3421219      85.3%      96.2%      #1 (2+4+1+2=9)
   ЙЦУКЕН                    12.5%        3080088      78.2%      97.6%      #2 (5+2+3+1=11)
   Диктор                    18.9%        2654778      82.1%      63.9%      #3 (3+1+2+4=10)